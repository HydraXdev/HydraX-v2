# üéØ C.O.R.E. Truth Tracker Integration

**Complete real-time crypto signal monitoring without skewing forex data**

## üìã Overview

The C.O.R.E. Truth Tracker Integration provides comprehensive monitoring of crypto signals generated by the C.O.R.E. (Coin Operations Reconnaissance Engine) system while maintaining complete separation from forex trading data to prevent performance metric contamination.

## üîß Core Components

### 1. Enhanced Truth Tracker (`truth_tracker.py`)
- **Dual Log System**: Separate `crypto_truth_log.jsonl` and `truth_log.jsonl` files
- **Signal Type Detection**: Automatically routes signals to correct log based on source/engine
- **Crypto Price Handling**: Dollar-based P&L tracking instead of pip calculation
- **Unified CLI**: Single interface to view forex, crypto, or combined data

### 2. Integration Layer (`core_truth_integration.py`)
- **Signal Bridge**: Connects C.O.R.E. signals to truth tracker
- **Stats Monitoring**: Real-time crypto signal statistics
- **Error Handling**: Robust error handling with detailed logging

### 3. Automatic Bot Integration (`bitten_production_bot.py`)
- **Real-time Tracking**: Automatically adds C.O.R.E. signals to truth tracker
- **Seamless Integration**: No interruption to signal delivery flow
- **Performance Monitoring**: Complete audit trail of all crypto signals

## üìä Signal Flow Architecture

```
C.O.R.E. Engine (core_filter.py)
    ‚Üì Generates crypto signal
ZMQ ‚Üí Telegram Bot (bitten_production_bot.py)
    ‚Üì Processes signal + adds to truth tracker
Truth Tracker (truth_tracker.py)
    ‚Üì Monitors BTCUSD market data
Market Data Receiver (port 8001)
    ‚Üì Real-time price updates
Signal Resolution (WIN/LOSS/TIMEOUT)
    ‚Üì Logs to crypto_truth_log.jsonl
Separate Reporting (no forex contamination)
```

## üéØ Key Features

### Separate Data Streams
- **Forex Signals**: `truth_log.jsonl` ‚Üí pip-based tracking
- **Crypto Signals**: `crypto_truth_log.jsonl` ‚Üí dollar-based tracking
- **No Cross-Contamination**: Performance metrics remain accurate for each asset class

### Real-time Monitoring
- **Live Market Data**: Continuous BTCUSD price monitoring
- **Instant Resolution**: Automatic WIN/LOSS detection based on SL/TP levels
- **Timeout Handling**: 24-hour maximum tracking with graceful timeout

### Enhanced Reporting
- **Signal Type Column**: Clear identification of forex vs crypto signals
- **Dollar Display**: Crypto results shown as `+$2000` instead of `+20.0 pips`
- **Separate Stats**: Independent win rates and P&L calculations

## üöÄ Usage Examples

### CLI Commands

```bash
# View latest crypto signals only
python3 truth_tracker.py --inspect-latest 5 --type crypto

# View latest forex signals only
python3 truth_tracker.py --inspect-latest 5 --type forex

# View combined signals (forex + crypto)
python3 truth_tracker.py --inspect-latest 10 --type both

# Start monitoring daemon (tracks both types)
python3 truth_tracker.py
```

### Programmatic Integration

```python
from core_truth_integration import track_core_signal

# Add C.O.R.E. signal to tracking (automatic in bot)
signal_data = {
    "uuid": "btc-mission-123456",
    "symbol": "BTCUSD", 
    "entry": 67245.50,
    "sl": 66245.50,    # $1000 stop loss
    "tp": 69245.50,    # $2000 take profit
    "score": 78,
    "engine": "CORE"
}

success = track_core_signal(signal_data)
```

### Manual Signal Addition

```python
from truth_tracker import TruthTracker

tracker = TruthTracker()
success = tracker.add_core_signal(signal_data)
```

## üìà Example Output

```
üìä TRUTH LOG INSPECTION - COMBINED - Latest 5 Entries
============================================================================
Signal ID                      Type   Symbol   Dir  Result   TCS    CITADEL  ML Filter  Pips/$     Runtime    Source
VENOM_UNFILTERED_EURUSD_001    FOREX  EURUSD   BUY  ‚úÖ WIN   84.2   8.5      true       +16.8p     23.4m      venom_scalp_master
btc-mission-1754176927         CRYPTO BTCUSD   BUY  ‚úÖ WIN   78.0   0.0      N/A        +$2000     45.2m      CORE
VENOM_UNFILTERED_GBPUSD_002    FOREX  GBPUSD   SELL ‚ùå LOSS  79.1   7.2      true       -12.5p     18.7m      venom_scalp_master

üìà SUMMARY: 2 wins, 1 losses, 66.7% win rate
üí± FOREX: 2 signals, +4.3 total pips
‚Çø CRYPTO: 1 signals, +$2000 total P&L
```

## üîç Signal Types Supported

### Forex Signals (VENOM)
- **Source**: `venom_scalp_master`
- **Symbols**: EUR/USD, GBP/USD, USD/JPY, etc.
- **Tracking**: Pip-based P&L calculation
- **Log File**: `truth_log.jsonl`

### Crypto Signals (C.O.R.E.)
- **Engine**: `CORE`
- **Symbols**: BTCUSD (more planned)
- **Tracking**: Dollar-based P&L calculation  
- **Log File**: `crypto_truth_log.jsonl`

## üìä Performance Metrics

### Separate Statistics
- **Win Rates**: Independent calculation for forex vs crypto
- **P&L Tracking**: Pips for forex, dollars for crypto
- **Risk Management**: Appropriate units for each asset class
- **Reporting**: Clean separation prevents data skewing

### Real-time Monitoring
- **Market Data**: Live BTCUSD price feed from port 8001
- **Signal Resolution**: Automatic WIN/LOSS detection
- **Performance Tracking**: Complete audit trail with metadata

## üõ°Ô∏è Security & Validation

### Source Authentication
- **Forex**: Only accepts `source: "venom_scalp_master"`
- **Crypto**: Only accepts `engine: "CORE"` with BTCUSD symbols
- **Rejection**: Invalid sources logged and rejected

### Data Integrity
- **Validation**: All signal data validated before tracking
- **Error Handling**: Graceful failure with detailed logging
- **Audit Trail**: Complete metadata tracking for compliance

## üìÅ File Structure

```
/root/HydraX-v2/
‚îú‚îÄ‚îÄ truth_tracker.py                    # Enhanced truth tracker (main)
‚îú‚îÄ‚îÄ core_truth_integration.py           # Integration layer
‚îú‚îÄ‚îÄ test_core_truth_tracker.py          # Integration test suite
‚îú‚îÄ‚îÄ truth_log.jsonl                     # Forex signals (existing)
‚îú‚îÄ‚îÄ crypto_truth_log.jsonl              # Crypto signals (new)
‚îú‚îÄ‚îÄ bitten_production_bot.py            # Auto-integration (enhanced)
‚îî‚îÄ‚îÄ CORE_TRUTH_TRACKER_INTEGRATION.md   # This documentation
```

## üîÑ Integration Points

### 1. C.O.R.E. Signal Generation
- **File**: `core_filter.py`
- **Action**: Generates crypto signals with SMC logic
- **Output**: ZMQ signal broadcast to bot

### 2. Bot Processing
- **File**: `bitten_production_bot.py` 
- **Action**: Receives signal + automatically adds to truth tracker
- **Integration**: `track_core_signal()` call in `_process_core_signal()`

### 3. Truth Tracking
- **File**: `truth_tracker.py`
- **Action**: Real-time monitoring of crypto signals
- **Market Data**: BTCUSD price monitoring via port 8001

### 4. Reporting
- **CLI**: Enhanced inspection with signal type filtering
- **Logs**: Separate crypto and forex log files
- **Stats**: Independent performance metrics

## üéØ Benefits

### Clean Data Separation
- **No Contamination**: Forex and crypto data completely separate
- **Accurate Metrics**: True performance measurement for each asset class
- **Professional Reporting**: Clear signal type identification

### Complete Monitoring
- **Real-time Tracking**: Every C.O.R.E. signal monitored from creation to completion
- **Audit Trail**: Complete metadata and performance history
- **Error Detection**: Automatic identification of system issues

### Operational Excellence
- **Automatic Integration**: Zero manual intervention required
- **Scalable Architecture**: Ready for additional crypto pairs
- **Robust Error Handling**: Graceful failure and recovery

## üöÄ Deployment Status

### ‚úÖ FULLY OPERATIONAL
- **Truth Tracker**: Enhanced with crypto support
- **Integration Layer**: Complete and tested
- **Bot Integration**: Automatic signal tracking active
- **CLI Tools**: Full inspection and monitoring capabilities
- **Documentation**: Complete usage and integration guide

### üéØ Ready for Production
The C.O.R.E. Truth Tracker Integration is production-ready and provides enterprise-grade monitoring of crypto signals without affecting existing forex tracking infrastructure.

**Next Steps**: The system automatically tracks all C.O.R.E. signals and provides separate reporting to maintain data integrity while enabling comprehensive performance analysis.