<!-- Reusable Button Component -->
<!-- Usage: {% include 'components/button.html' %} with context -->

{% macro button(
    text='Button',
    type='button',
    variant='primary',
    size='md',
    icon=None,
    aria_label=None,
    disabled=False,
    loading=False,
    onclick=None
) %}
<button 
    type="{{ type }}"
    class="btn btn--{{ variant }} btn--{{ size }}{% if disabled %} btn--disabled{% endif %}{% if loading %} btn--loading{% endif %}"
    {% if aria_label %}aria-label="{{ aria_label }}"{% endif %}
    {% if disabled %}disabled{% endif %}
    {% if onclick %}onclick="{{ onclick }}"{% endif %}
    data-variant="{{ variant }}"
    data-size="{{ size }}">
    
    {% if loading %}
        <span class="btn__spinner" aria-hidden="true">
            <svg class="spinner" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" />
            </svg>
        </span>
        <span class="sr-only">Loading...</span>
    {% endif %}
    
    {% if icon and not loading %}
        <span class="btn__icon" aria-hidden="true">{{ icon }}</span>
    {% endif %}
    
    <span class="btn__text">{{ text }}</span>
</button>
{% endmacro %}

<!-- CSS for Button Component -->
<style>
.btn {
    /* Base styles */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    font-family: inherit;
    font-weight: 600;
    border: 2px solid transparent;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    text-decoration: none;
    white-space: nowrap;
    
    /* Focus styles */
    &:focus-visible {
        outline: 3px solid var(--color-primary);
        outline-offset: 2px;
    }
    
    /* Disabled state */
    &:disabled,
    &.btn--disabled {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
    }
    
    /* Loading state */
    &.btn--loading {
        color: transparent;
        pointer-events: none;
    }
    
    &.btn--loading .btn__spinner {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
    }
}

/* Size variants */
.btn--xs {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--font-xs);
    min-height: 28px;
}

.btn--sm {
    padding: var(--space-sm) var(--space-md);
    font-size: var(--font-sm);
    min-height: 36px;
}

.btn--md {
    padding: var(--space-sm) var(--space-lg);
    font-size: var(--font-base);
    min-height: 44px;
}

.btn--lg {
    padding: var(--space-md) var(--space-xl);
    font-size: var(--font-lg);
    min-height: 52px;
}

/* Color variants */
.btn--primary {
    background: var(--color-primary);
    color: var(--color-bg-dark);
    
    &:hover:not(:disabled) {
        background: var(--color-primary-dark);
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
    
    &:active:not(:disabled) {
        transform: translateY(0);
    }
}

.btn--secondary {
    background: var(--color-secondary);
    color: white;
    
    &:hover:not(:disabled) {
        background: #6b2fc7;
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
}

.btn--danger {
    background: var(--color-danger);
    color: white;
    
    &:hover:not(:disabled) {
        background: #dc2626;
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }
}

.btn--ghost {
    background: transparent;
    color: var(--color-text-primary);
    border-color: var(--color-border);
    
    &:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.1);
        border-color: var(--color-primary);
    }
}

/* Spinner animation */
@keyframes spin {
    to { transform: rotate(360deg); }
}

.spinner {
    width: 20px;
    height: 20px;
    animation: spin 1s linear infinite;
}

.spinner circle {
    stroke-dasharray: 60;
    stroke-dashoffset: 45;
}
</style>